{% extends "base_generic.html" %}

{% block content %}
<div class="container">
    <ul id = "notf_list">
        {% for x in notifications %}
            <li><h4>{{ x }}</h4></li>
        {% endfor %}
    </ul>
</div>
{% endblock %}

{% block javascript %}
<script>
setInterval(function () {
        console.log('it works' + new Date());
        $.ajax({
            type: 'GET',
            url: "{% url 'main:get_new_notifications' %}",
            success: function (response) {
                console.log(response);
                var newnotfs = response["new_notifications"];
                console.log(newnotfs);
                for (notf in newnotfs) {
                    console.log(newnotfs[notf])
                    $('#notf_list').prepend(
                        '<li><h4>'+ JSON.stringify(newnotfs[notf]) +'</h4></li>'
                    )
                }
            },
            error: function (response) {
                console.log(response)
            }
        })
    },10000);
</script>
{% endblock javascript %}
